<div class="modal-header text-light bg-dark">
    <p class="modal-title">Datos del usuario</p>
</div>
<div class="modal-body">
    <div class="card">
        <div class="card-header">
            Datos generales
        </div>
        <div class="card-body">
            <form [formGroup]="generalDataForm">
                <div class="form-row">
                    <div class="form-group col">
                        <label for="name">Nombre</label>
                        <input type="text" class="form-control" name="name" formControlName="name"
                            [ngClass]="{'is-invalid': generalDataForm.get('name').invalid && generalDataForm.get('name').touched}">
                        <field-error-display [control]="generalDataForm.get('name')"></field-error-display>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-6">
                        <label for="user">Usuario</label>
                        <input type="text" class="form-control" name="user" formControlName="user"
                            [ngClass]="{'is-invalid': generalDataForm.get('user').invalid && generalDataForm.get('user').touched}">
                        <field-error-display [control]="generalDataForm.get('user')"></field-error-display>
                    </div>
                    <div class="form-group col-6">
                        <label for="inputPassword">Correo electronico</label>
                        <input type="text" class="form-control" name="email" formControlName="email"
                            [ngClass]="{'is-invalid': generalDataForm.get('email').invalid && generalDataForm.get('email').touched}">
                        <field-error-display [control]="generalDataForm.get('email')"></field-error-display>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="card separator-t-20">
        <div class="card-header bg-secondary text-light">
            Permisos
        </div>
        <div class="card-body">
            <ngb-accordion>
                <ngb-panel *ngFor="let module of permissions">
                    <ng-template class="bg-dark" ngbPanelHeader>
                        <button class="btn btn-block title-module" ngbPanelToggle>{{ module.name }}</button>
                    </ng-template>
                    <ng-template ngbPanelContent>
                        <div class="row submodule" *ngFor="let submodule of module.submodules">
                            <div class="col-md-8 col-sm-4">{{submodule.name}}</div>
                            <div class="col-md-2 col-sm-4">
                                <div class="form-group form-check">
                                    <input type="checkbox" class="form-check-input" [(ngModel)]="submodule.access" id="access-{{submodule.name}}">
                                    <label class="form-check-label" for="access-{{submodule.name}}">Acceso</label>
                                </div>
                            </div>
                            <div class="col-md-2 col-sm-4">
                                <div class="form-group form-check">
                                    <input type="checkbox" class="form-check-input" [(ngModel)]="submodule.write" id="write-{{submodule.name}}">
                                    <label class="form-check-label" for="write-{{submodule.name}}">Escritura</label>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </ngb-panel>

            </ngb-accordion>
        </div>
    </div>
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-sm btn-success" [disabled]="form.invalid" (click)="save()">Guardar</button>
    <button type="button" class="btn btn-sm btn-secondary" (click)="activeModal.dismiss()">Cancelar</button>
</div>